<!DOCTYPE html>
<html>

<head>
    <!-- Include the p5.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/p5.min.js"></script>
    <!-- Include the ml5.js library -->
    <script src="https://unpkg.com/ml5@latest/dist/ml5.min.js"></script>
    <link rel="stylesheet" href="styles/main.css">
</head>

<body>
    <nav class="nav-bar">
        <ul>
            <li><a href="index.html">Image Classification</a></li>
            <li><a href="objDetect.html">Object Detection</a></li>
            <li><a href="ml5.html" class="active">Image Upload</a></li>
        </ul>
    </nav>
    <h1>ml5 Image Classifier</h1>
    <h2>Click "Choose File" to Add an Image</h2>
    <div class="imageResult" id="imageResult"></div>
    <div class="imageInput">
        <input type="file" oninput="uploadedImage.src=window.URL.createObjectURL(this.files[0]); startImageScan()">
    </div>
    <img class="uploadedImage" id="uploadedImage" />
    <script>
    // Create a variable containing the result container
    const element = document.getElementById("imageResult");
     
    function startImageScan() {
        // Create a variable to initialize the ml5.js image classifier with MobileNet
        const classifier = ml5.imageClassifier('MobileNet');
        
        // Scan the uploaded image
        classifier.classify(document.getElementById("uploadedImage"), imageScanResult);
        element.innerHTML = "Analyzing image...";
    }
     
    // Check for errors and display the results if there aren't any
    function imageScanResult(error, results) {
        if (error) {
            element.innerHTML = error;
        } else {
            let num = results[0].confidence * 100;
            element.innerHTML = `
                <p><strong>Label:</strong> ${results[0].label}</p>
                <p><strong>Confidence:</strong> ${num.toFixed(2)}%</p>
            `;
        }
    }
    </script>

</body>

</html>
